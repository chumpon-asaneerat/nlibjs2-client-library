<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Home Page.</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/ico" href="public/favicon.ico"/>

    <!-- Font Awesome -->
    <link href="/dist/css/fontawesome.all.min.css" rel="stylesheet" type="text/css" />
    <!-- JQuery UI -->
    <link href="/dist/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
    <!-- Bootstrap 4 -->
    <link href="/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/dist/css/bootstrap-grid.min.css" rel="stylesheet" type="text/css" />
    <link href="/dist/css/bootstrap-reboot.min.css" rel="stylesheet" type="text/css" />
    <!-- Flag and Emoji icons -->
    <link href="/dist/css/flag-icon.min.css" rel="stylesheet" type="text/css" />
    <link href="/dist/css/emojisymbol.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <p><i class="fas fa-arrow-right">&nbsp;&nbsp;</i>Sample icon</p>
    <img src="/public/images/gif/emoji/transparent/emo-nt-01.gif" 
        height="auto" width="auto" 
        style="display: block; margin-left: auto; margin-right: auto;">

    <br>
    <button onclick="getImage();">Get image</button>
    <img id="img1" src="" 
        height="auto" width="auto" 
        style="display: block; margin-left: auto; margin-right: auto;">

    <br>    
    <!-- MULTIPLE FILES -->
    <form action="/uploadmultiple" enctype="multipart/form-data" method="POST">
        <input type="file" name="myFiles2" multiple>
        <input type="submit" value="Upload your files">
    </form>

    <div id="editor" style="font-size: 1.2em; margin: 10px auto; width: 70%; height: 300px;"></div>

    <br>
    <button onclick="getSampleJson();">Get json</button>
    <button onclick="getSampleJavaScript();">Get javascript</button>
    <div id="jsonEd" style="font-size: 1.2em; margin: 10px auto; width: 70%; height: 300px;"></div>

    <!-- JQuery -->
    <script src="/dist/js/jquery.min.js"></script>
    <!-- JQuery UI -->
    <script src="/dist/js/jquery-ui.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="/dist/js/popper.min.js"></script>
    <script src="/dist/js/tooltip.min.js"></script>
    <script src="/dist/js/bootstrap.min.js">/* bootstrap required jQuery and popperjs. */</script>
    <!-- Moment.js -->
    <script src="/dist/js/moment.min.js"></script>
    <!-- ace editor -->
    <script src="/dist/js/ace.js"></script>
    <script src="/dist/js/mode-html.js"></script>
    <script src="/dist/js/mode-json.js"></script>
    <script src="/dist/js/mode-javascript.js"></script>
    <!-- ace editor init -->
    <script>
        let editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/javascript");
        
        let src = 
`function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
}`
        editor.session.setValue(src)
    </script>
    <!-- Riot.js -->
    <script src="/dist/js/riot.min.js"></script>
    <!-- Riot.js components -->
    <!--
    <script src="public/dist/components/riot/tags.js"></script>
    -->
    <!-- nlib -->
    <script src="dist/js/nlib.js"></script>
    <!-- nlib test scripts -->
    <!--
    <script src="dist/js/timespan.js"></script>
    <script src="dist/js/datetime.js"></script>
    -->

    <!-- XHR test code -->
    <script>
        let jsonEd = ace.edit("jsonEd");
        jsonEd.setTheme("ace/theme/monokai");
        let getSampleJson = () => {
            XHR.get('/getJson', (data) => {
                jsonEd.session.setMode("ace/mode/json");
                let src = (data.result) ? data.result : '';
                jsonEd.session.setValue(src)
            })
        }
        let getSampleJavaScript = () => {
            XHR.get('/getJavaScript', (data) => {
                jsonEd.session.setMode("ace/mode/javascript");
                let src = (data.result) ? data.result : '';
                jsonEd.session.setValue(src)
            })
        }
        let img = document.getElementById('img1');
        img.onload = function(e) {
            if (img.src && img.src.startsWith('blob:')) {
                console.log('revoke exist image')
                URL.revokeObjectURL(img.src); // Clean up after yourself.
            }
        }
        let getImage = () => {
            let url = '/public/images/gif/emoji/normal/emo-n-01.gif';
            XHR.getFile(url, (data) => {
                let obj = (data.result) ? URL.createObjectURL(data.result) : null;
                img.src = obj;
            })
        }
    </script>

    <!-- page custom script -->
    <script>
        //riot.mount('app', { text: 'XXX' })
        //nlib.nav.gotoUrl('/')
    </script>
</body>
</html>